{
	"platform": {
		"apiRuntime": "node:20"
	},
	"routes": [
		{
			"route": "/login",
			"redirect": "/.auth/login/github"
		},
		{
			"route": "/logout",
			"redirect": "/.auth/logout"
		},
		{
			"route": "/api/*",
			"allowedRoles": ["authenticated"]
		},
		{
			"route": "/profile/*",
			"allowedRoles": ["authenticated"]
		},
		{
			"route": "/welcome",
			"redirect": "/profile?setup=true"
		}
	],
	"responseOverrides": {
		"401": {
			"redirect": "/.auth/login/github?post_login_redirect_uri=/welcome",
			"statusCode": 302
		}
	},
	"navigationFallback": {
		"rewrite": "/404.html",
		"exclude": ["/_astro/*", "/images/*.{png,jpg,gif,ico}", "/favicon.ico", "/.auth/*", "/api/*"]
	},
	"globalHeaders": {
		"X-Content-Type-Options": "nosniff",
		"X-Frame-Options": "DENY",
		"X-XSS-Protection": "1; mode=block",
		"Referrer-Policy": "strict-origin-when-cross-origin",
		"Permissions-Policy": "geolocation=(), microphone=(), camera=()"
	}
}
